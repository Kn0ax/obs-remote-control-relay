<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OBS Remote Control Relay</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="vanilla-framework-version-4.14.0.min.css" />
  </head>

  <body class="is-dark" style="background:#1a1a1a">
    <div class="row">
      <div class="col-2"></div>
      <div class="col-8" style="margin:auto">
        <h1>OBS Remote Control Relay</h1>
      </div>
      <div class="col-2"></div>
    </div>

    <div class="row">
      <div class="col-2"></div>
      <div class="col-8">
        <div class="p-card">
          <p class="u-align-text--center">⚠️ DO NOT LEAVE THIS PAGE WHEN USING THE REMOTE CONTROL ⚠️</p>
        </div>
      </div>
      <div class="col-2"></div>
    </div>

    <div class="row">
      <div class="col-2"></div>
      <div class="col-8">
        <div class="p-card">
          <h2>About</h2>
          <p>
            The OBS Remote Control Relay aims to eliminate the need
            for port forwarding, public IP address, and VPN when using
            the OBS remote control to control OBS on your computer at
            home.
          </p>
        </div>
      </div>
      <div class="col-2"></div>
    </div>

    <div class="row">
      <div class="col-2"></div>
      <div class="col-8">
        <div class="p-card">
          <h2>Remote controllers</h2>
          <div>
            <table id="connections" style="table-layout:auto">
              <thead>
                <tr>
                  <th>Status</th>
                  <th>Status changed</th>
                  <th>Bitrate to device</th>
                  <th>Bitrate to OBS</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
          <div id="help"></div>
        </div>
      </div>
      <div class="col-2"></div>
    </div>

    <div class="row">
      <div class="col-2"></div>
      <div class="col-8">
        <div class="p-card">
          <h2>Remote controller setup</h2>
            Setup the OBS remote control in your device.
          <h3>Moblin</h3>
          <button onclick="copyMoblinRemoteControllerUrlToClipboard()">
            <i class="p-icon--copy"></i> URL
          </button>
          Paste it in Settings → Streams → My stream → OBS remote control → URL.
          <h3>OBS Blade</h3>
          <button onclick="copyObsBladeHostnameRemoteControllerUrlToClipboard()">
            <i class="p-icon--copy"></i> Hostname
          </button>
          Paste it in Aa → Domain → Hostname. Leave wss:// as is. Erase the port.
          <div class="p-notification--caution is-inline">
            <div class="p-notification__content">
              <p class="p-notification__message">
                Handle your remote control device configuration same as a
                password: never share it and don't show it on your
                stream.
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="col-2"></div>
    </div>

    <div class="row">
      <div class="col-2"></div>
      <div class="col-8">
        <div class="p-card">
          <h2>Relay status</h2>
          <p id="relayStatus"></p>
          <p id="relayStatusTimeAgo"></p>
        </div>
      </div>
      <div class="col-2"></div>
    </div>

    <div class="row">
      <div class="col-2"></div>
      <div class="col-8">
        <div class="p-card">
          <h2>Settings</h2>
          <p>OBS WebSocket Server port</p>
          <input id="obsPort" type="text" name="obsPort" >
          <button onclick="saveObsPort()" >Save</button>
          <div>
            <button class="p-button--negative" onclick="resetSettings()" >Reset settings</button>
          </div>
        </div>
      </div>
      <div class="col-2"></div>
    </div>

    <script src="index.js"></script>
  </body>
</html>
